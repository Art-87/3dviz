<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Art‑87 — 3D визуализация интерьеров и экстерьеров</title>
  <meta name="description" content="3D визуализация интерьеров и экстерьеров, предметное 3D‑моделирование и фотореалистичные рендеры для архитектуры, рекламы и e‑commerce.">
  <link rel="canonical" href="https://art-87.github.io/3dviz/" />
  <meta name="theme-color" content="#0b1020" />

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Art‑87 — 3D визуализация интерьеров и экстерьеров">
  <meta property="og:description" content="Интерьеры, экстерьеры, предметка. Фотореалистичные рендеры и 3D‑модели.">
  <meta property="og:url" content="https://art-87.github.io/3dviz/">
  <meta property="og:image" content="https://art-87.github.io/3dviz/img/cover.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Art‑87 — 3D визуализация">
  <meta name="twitter:description" content="Интерьеры, экстерьеры, предметка. Фотореализм.">
  <meta name="twitter:image" content="https://art-87.github.io/3dviz/img/cover.jpg">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;800&display=swap" rel="stylesheet">

  <!-- Schema.org -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Person",
    "name":"Art‑87",
    "jobTitle":"3D Artist",
    "url":"https://art-87.github.io/3dviz/",
    "sameAs":[ "https://t.me/Arthakim" ],
    "knowsAbout":[ "3D visualization","architectural visualization","product rendering" ]
  }
  </script>

  <style>
    :root{
      --bg:#0b1020; --surface:rgba(255,255,255,.04); --card:rgba(255,255,255,.06);
      --text:#e5e7eb; --muted:#9ca3af; --border:rgba(255,255,255,.12);
      --accent1:#8b5cf6; --accent2:#06b6d4;
    }
    [data-theme="light"]{
      --bg:#f8fafc; --surface:rgba(0,0,0,.03); --card:#ffffff;
      --text:#0f172a; --muted:#475569; --border:rgba(2,6,23,.12);
    }

    *{box-sizing:border-box}
    html,body{margin:0}
    body{
      font-family: Manrope,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:
        radial-gradient(1200px 600px at 80% -10%, rgba(124,58,237,.25), transparent 60%),
        radial-gradient(800px 400px at -10% 20%, rgba(6,182,212,.18), transparent 60%),
        var(--bg);
      color:var(--text); line-height:1.6;
    }
    a{color:inherit; text-decoration:none}
    .container{width:min(1120px,92%); margin:0 auto}

    /* Nav */
    header{position:sticky; top:0; z-index:50; backdrop-filter:saturate(130%) blur(10px);
      background:rgba(11,16,32,.55); border-bottom:1px solid var(--border)}
    [data-theme="light"] header{background:rgba(255,255,255,.7)}
    nav{display:flex; align-items:center; justify-content:space-between; padding:14px 0}
    .logo{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.3px}
    .logo-badge{width:28px; height:28px; border-radius:8px;
      background:linear-gradient(135deg,var(--accent1),var(--accent2))}
    .controls{display:flex; align-items:center; gap:12px}
    .nav-links{display:flex; gap:18px; font-weight:600; color:#cbd5e1}
    [data-theme="light"] .nav-links{color:#334155}
    .nav-links a{opacity:.9} .nav-links a:hover{opacity:1}
    .btn-mini{display:inline-flex; align-items:center; gap:6px; padding:8px 10px; border-radius:999px; border:1px solid var(--border); background:var(--surface); color:var(--text); font-weight:700; cursor:pointer}
    .btn-mini .sun{display:none}
    [data-theme="light"] .btn-mini .sun{display:inline}
    [data-theme="light"] .btn-mini .moon{display:none}

    /* Hero (текст) */
    .hero{padding:80px 0 16px; text-align:center}
    .kicker{display:inline-block; font-size:13px; letter-spacing:.2px; color:#cbd5e1;
      background:var(--surface); border:1px solid var(--border); padding:6px 10px; border-radius:999px}
    [data-theme="light"] .kicker{color:#475569}
    h1{font-size: clamp(32px, 6vw, 56px); line-height:1.1; margin:14px 0}
    .gradient-text{background:linear-gradient(90deg,var(--accent1),var(--accent2));
      -webkit-background-clip:text; background-clip:text; color:transparent}
    .lead{color:#cbd5e1; font-size: clamp(16px, 2.2vw, 20px); max-width:820px; margin:0 auto 18px}
    [data-theme="light"] .lead{color:#334155}
    .chips{display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin:16px 0 26px}
    .chip{font-size:13px; color:#cbd5e1; border:1px solid var(--border); background:var(--surface); padding:6px 10px; border-radius:999px}
    [data-theme="light"] .chip{color:#475569}
    .buttons{display:flex; gap:12px; justify-content:center; flex-wrap:wrap}
    .btn{display:inline-flex; align-items:center; justify-content:center; padding:12px 18px; border-radius:10px; font-weight:700; border:1px solid var(--border)}
    .btn.primary{color:white; border:0; background:linear-gradient(135deg,var(--accent1),var(--accent2)); box-shadow:0 10px 30px rgba(6,182,212,.18)}
    .btn.ghost{background:var(--surface); color:#d1d5db}
    [data-theme="light"] .btn.ghost{color:#0f172a}

    /* HERO — Ken Burns (21:9) */
    .hero-kb{
      position: relative; width:min(1120px,92%); aspect-ratio:21/9;
      border-radius:14px; overflow:hidden; border:1px solid var(--border);
      margin:24px auto 0;
    }
    .hero-kb::after{
      content:""; position:absolute; inset:0;
      background:linear-gradient(to top, rgba(0,0,0,.35), transparent 40%); pointer-events:none;
    }
    [data-theme="light"] .hero-kb::after{ background:linear-gradient(to top, rgba(0,0,0,.20), transparent 40%) }
    .kb-slides{ position:absolute; inset:0 }
    .kb-slide{
      position:absolute; inset:0; opacity:0;
      will-change:transform,opacity; transform:scale(1) translate(0,0);
      transition: none;
      animation: kbFade 12s infinite ease-in-out, kbZoom 12s infinite linear;
    }
    /* Порядок/смещение для 2 кадров */
    .kb-slide:nth-child(1){ animation-delay: 0s, 0s }
    .kb-slide:nth-child(2){ animation-delay: 6s, 6s }

    .kb-slide img{ width:100%; height:100%; object-fit:cover; display:block }

    /* Опасити-кроссфейд: 0–40% видим, 40–50% переход, дальше скрыт */
    @keyframes kbFade{
      0%, 40% { opacity:1 }
      50%, 100% { opacity:0 }
    }
    /* Лёгкий зум/пан */
    @keyframes kbZoom{
      0%   { transform:scale(1.00) translate(0%, 0%) }
      40%  { transform:scale(1.08) translate(-1%, 0.5%) }
      100% { transform:scale(1.12) translate(-2%, 1%) }
    }

    /* Уважение reduced motion: показываем первый кадр без анимации */
    @media (prefers-reduced-motion: reduce){
      .kb-slide{ animation:none }
      .kb-slide:nth-child(1){ opacity:1 }
    }

    /* Sections */
    section{padding:64px 0}
    section .section-head{display:flex; justify-content:space-between; align-items:end; gap:20px; margin-bottom:22px}
    h2{font-size: clamp(24px, 4vw, 34px); margin:0}
    .muted{color:var(--muted)}

    /* Services */
    .grid{display:grid; gap:16px; grid-template-columns:repeat(12,1fr)}
    .card{grid-column:span 4; background:var(--card); border:1px solid var(--border); border-radius:14px; padding:20px}
    .card:hover{transform:translateY(-2px); transition:.2s ease; box-shadow:0 10px 30px rgba(0,0,0,.18)}
    .card h3{margin:.2rem 0 6px}
    .card ul{margin:8px 0 0 18px; color:#cbd5e1}
    [data-theme="light"] .card ul{color:#334155}
    .emoji{font-size:22px}

    /* Portfolio — Coverflow */
    .filters{display:flex; gap:8px; flex-wrap:wrap}
    .filters .chip{cursor:pointer; user-select:none}
    .filters .chip.is-active{background:linear-gradient(135deg,var(--accent1),var(--accent2)); color:#fff; border:0}

    .cf{ position:relative; perspective:1200px }
    .cf-viewport{
      position:relative; width:100%; aspect-ratio:16/9;
      border:1px solid var(--border); background:var(--card); border-radius:14px; overflow:visible
    }
    .cf-track{ position:absolute; inset:0; transform-style:preserve-3d }
    .cf-item{
      position:absolute; top:50%; left:50%;
      width:min(72%, 820px); aspect-ratio:16/9;
      border-radius:12px; overflow:hidden; border:1px solid var(--border);
      background:#0f162f; box-shadow:0 20px 60px rgba(0,0,0,.35);
      will-change:transform,opacity;
      transition: transform .45s cubic-bezier(.22,.61,.36,1), opacity .3s
    }
    [data-theme="light"] .cf-item{ background:#f1f5f9; box-shadow:0 12px 30px rgba(2,6,23,.15) }
    .cf-item img{ width:100%; height:100%; object-fit:cover; object-position:50% 50%; display:block }
    .cf .cf-nav{
      position:absolute; top:50%; transform:translateY(-50%);
      width:42px; height:42px; border-radius:999px; border:1px solid var(--border);
      background:rgba(0,0,0,.35); color:#fff; display:grid; place-items:center; font-size:20px; cursor:pointer; z-index:5
    }
    [data-theme="light"] .cf .cf-nav{ background:rgba(255,255,255,.7); color:#0f172a }
    .cf .cf-nav.prev{ left:10px } .cf .cf-nav.next{ right:10px }
    .cf-dots{ display:flex; gap:8px; justify-content:center; padding:10px }
    .cf-dots .dot{ width:8px; height:8px; border-radius:999px; border:0; background:var(--muted); opacity:.6; cursor:pointer }
    .cf-dots .dot[aria-selected="true"]{ width:26px; opacity:1; background:linear-gradient(135deg,var(--accent1),var(--accent2)) }

    /* Lightbox */
    .lightbox{
      position:fixed; inset:0; background:rgba(0,0,0,.85);
      display:none; align-items:center; justify-content:center; z-index:1000; padding:24px
    }
    .lightbox.is-open{ display:flex }
    .lightbox .frame{ position:relative; max-width:92vw; max-height:86vh }
    .lightbox img{ display:block; max-width:100%; max-height:100%; border-radius:12px }
    .lightbox .cap{ color:#e5e7eb; text-align:center; margin-top:10px }
    .lightbox .close,.lightbox .lb-prev,.lightbox .lb-next{
      position:absolute; top:50%; transform:translateY(-50%);
      width:42px; height:42px; border-radius:999px; border:1px solid rgba(255,255,255,.25);
      background:rgba(255,255,255,.15); color:#fff; display:grid; place-items:center; font-size:20px; cursor:pointer
    }
    .lightbox .close{ top:-12px; right:-12px; transform:none }
    .lightbox .lb-prev{ left:-56px } .lightbox .lb-next{ right:-56px }
    @media (max-width: 720px){
      .lightbox .lb-prev{ left:6px } .lightbox .lb-next{ right:6px }
      .lightbox .close{ right:6px; top:6px }
    }

    /* Process, Contact, Footer */
    .steps{display:grid; gap:14px; grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
    .step{background:var(--card); border:1px solid var(--border); border-radius:14px; padding:18px}
    .step .num{width:28px; height:28px; border-radius:999px; display:inline-flex; align-items:center; justify-content:center; font-weight:800; color:white; background:linear-gradient(135deg,var(--accent1),var(--accent2)); margin-bottom:10px}
    .contact{background:linear-gradient(135deg, rgba(124,58,237,.18), rgba(6,182,212,.18)); border:1px solid var(--border); border-radius:16px; padding:26px}
    .cta{display:flex; gap:12px; flex-wrap:wrap}
    .cta .btn{padding:12px 16px}
    .contact-form{margin-top:14px; display:grid; gap:10px; grid-template-columns:repeat(2,1fr)}
    .contact-form input,.contact-form select,.contact-form textarea{width:100%; padding:12px 14px; border-radius:10px; border:1px solid var(--border); background:rgba(0,0,0,.25); color:#e5e7eb; outline:none}
    [data-theme="light"] .contact-form input,[data-theme="light"] .contact-form select,[data-theme="light"] .contact-form textarea{background:rgba(0,0,0,.04); color:#0f172a}
    .contact-form textarea{min-height:120px; grid-column:1/-1; resize:vertical}
    .contact-form input:focus,.contact-form select:focus,.contact-form textarea:focus{border-color:transparent; box-shadow:0 0 0 2px rgba(124,58,237,.45), 0 0 0 4px rgba(6,182,212,.25)}
    .contact-form .full{grid-column:1/-1}
    footer{padding:34px 0 60px; color:#94a3b8; text-align:center; font-size:14px}

    /* Helpers */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    @media (max-width: 980px){ .card{grid-column:span 6} }
    @media (max-width: 640px){ .nav-links{display:none} .hero{padding-top:56px} .card{grid-column:span 12} }
    html{scroll-behavior:smooth}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <nav aria-label="Главная навигация">
        <a class="logo" href="./" aria-label="Art‑87 на главную">
          <div class="logo-badge"></div>
          <span>Art‑87 · 3D Visualization</span>
        </a>
        <div class="controls">
          <div class="nav-links">
            <a href="#services">Услуги</a>
            <a href="#portfolio">Портфолио</a>
            <a href="#process">Процесс</a>
            <a href="#contact">Контакты</a>
          </div>
          <button id="theme-toggle" class="btn-mini" type="button" aria-label="Переключить тему">
            <span class="sun">☀️ Светлая</span>
            <span class="moon">🌙 Тёмная</span>
          </button>
        </div>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero container">
      <span class="kicker">3D для архитектуры, рекламы и e‑commerce</span>
      <h1><span class="gradient-text">3D визуализация интерьеров и экстерьеров</span></h1>
      <p class="lead">Предметное 3D‑моделирование и фотореалистичные рендеры: каталоги, лендинги, карточки товаров, презентации проектов.</p>

      <div class="chips">
        <span class="chip">2–5 дней/кадр</span>
        <span class="chip">4K / 8K рендеры</span>
        <span class="chip">1–3 итерации правок</span>
        <span class="chip">.FBX .OBJ .GLB по запросу</span>
      </div>

      <div class="buttons">
        <a class="btn primary" href="#contact">Получить расчёт</a>
        <a class="btn ghost" href="#portfolio">Смотреть портфолио</a>
      </div>
    </section>

    <!-- HERO — Ken Burns -->
    <div class="hero-kb" aria-hidden="true">
      <div class="kb-slides">
        <div class="kb-slide">
          <img src="https://images.unsplash.com/photo-1600585154526-990dced4db0d?auto=format&fit=crop&w=1920&h=823&q=80" alt="">
        </div>
        <div class="kb-slide">
          <img src="https://images.unsplash.com/photo-1536376072261-38c75010e6c9?auto=format&fit=crop&w=1920&h=823&q=80" alt="">
        </div>
      </div>
      <noscript>
        <img src="https://images.unsplash.com/photo-1600585154526-990dced4db0d?auto=format&fit=crop&w=1920&h=823&q=80" alt="" style="width:100%;height:100%;object-fit:cover;display:block;">
      </noscript>
    </div>

    <section id="services" class="container">
      <div class="section-head">
        <h2>Услуги</h2>
        <p class="muted">Работаю по брифу и референсам, аккуратные материалы и свет.</p>
      </div>

      <div class="grid">
        <div class="card">
          <div class="emoji">🏠</div>
          <h3>Интерьерная визуализация</h3>
          <p>Квартиры, дома, коммерческие помещения: реалистичные материалы, освещение, композиция.</p>
          <ul>
            <li>Несколько ракурсов на выбор</li>
            <li>Финал 4K/8K, архив по запросу</li>
            <li>Срок — от 2 дней/кадр</li>
          </ul>
        </div>

        <div class="card">
          <div class="emoji">🏗️</div>
          <h3>Экстерьеры и архитектура</h3>
          <p>ЖК, коттеджи, урбан-сцены: контекст, ландшафт, сезонность, люди/авто.</p>
          <ul>
            <li>День/ночь, атмосферные кадры</li>
            <li>Широкие планы и аэроракурсы</li>
            <li>Срок — от 3 дней/кадр</li>
          </ul>
        </div>

        <div class="card">
          <div class="emoji">📦</div>
          <h3>Предметная визуализация</h3>
          <p>Товары для маркетплейсов и рекламы: карточки, каталоги, 360/анимации.</p>
          <ul>
            <li>PBR‑материалы, UV, чистая топология</li>
            <li>Форматы: .FBX/.OBJ/.GLB</li>
            <li>Turntable по запросу</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ПОРТФОЛИО: coverflow + фильтры + лайтбокс -->
    <section id="portfolio" class="container">
      <div class="section-head">
        <h2>Портфолио</h2>
        <div class="filters">
          <button class="chip is-active" data-filter="all" type="button">Все</button>
          <button class="chip" data-filter="interior" type="button">Интерьеры</button>
          <button class="chip" data-filter="exterior" type="button">Экстерьеры</button>
          <button class="chip" data-filter="product" type="button">Предметка</button>
        </div>
      </div>

      <div class="cf" id="coverflow" aria-label="Портфолио coverflow">
        <div class="cf-viewport">
          <div class="cf-track">
            <figure class="cf-item" data-cat="interior">
              <img src="img/01.jpg" width="1600" height="900" alt="Интерьер · гостиная">
              <figcaption class="sr-only">Интерьер · гостиная</figcaption>
            </figure>
            <figure class="cf-item" data-cat="interior">
              <img src="img/02.jpg" width="1600" height="900" alt="Интерьер · кухня">
              <figcaption class="sr-only">Интерьер · кухня</figcaption>
            </figure>
            <figure class="cf-item" data-cat="exterior">
              <img src="img/03.jpg" width="1600" height="900" alt="Экстерьер · дом">
              <figcaption class="sr-only">Экстерьер · дом</figcaption>
            </figure>
            <figure class="cf-item" data-cat="exterior">
              <img src="img/04.jpg" width="1600" height="900" alt="Экстерьер · ЖК">
              <figcaption class="sr-only">Экстерьер · ЖК</figcaption>
            </figure>
            <figure class="cf-item" data-cat="product">
              <img src="img/05.jpg" width="1600" height="900" alt="Товар · студийный рендер">
              <figcaption class="sr-only">Товар · студийный рендер</figcaption>
            </figure>
            <figure class="cf-item" data-cat="product">
              <img src="img/06.jpg" width="1600" height="900" alt="Товар · композиция">
              <figcaption class="sr-only">Товар · композиция</figcaption>
            </figure>
          </div>
        </div>

        <button class="cf-nav prev" aria-label="Предыдущая работа" type="button">‹</button>
        <button class="cf-nav next" aria-label="Следующая работа" type="button">›</button>
        <div class="cf-dots" role="tablist" aria-label="Пагинация"></div>
      </div>
    </section>

    <section id="process" class="container">
      <div class="section-head">
        <h2>Как я работаю</h2>
        <p class="muted">Прозрачно по этапам и срокам.</p>
      </div>
      <div class="steps">
        <div class="step"><div class="num">1</div><h3>Бриф и референсы</h3><p>План/чертежи, стилистика, примеры. Обсуждаем цели и сроки.</p></div>
        <div class="step"><div class="num">2</div><h3>Камеры</h3><p>Предварительные ракурсы на согласование.</p></div>
        <div class="step"><div class="num">3</div><h3>Материалы и свет</h3><p>Первый превью‑рендер, проверяем настроение и детали.</p></div>
        <div class="step"><div class="num">4</div><h3>Правки</h3><p>1–3 итерации правок в рамках ТЗ.</p></div>
        <div class="step"><div class="num">5</div><h3>Финал</h3><p>4K/8K рендеры, исходники по договорённости.</p></div>
      </div>
    </section>

    <section id="contact" class="container">
      <div class="contact">
        <h2>Связаться</h2>
        <p class="muted">Опишите задачу — пришлю бриф, сроки и стоимость. Удобно в Telegram.</p>
        <div class="cta">
          <a class="btn primary" href="https://t.me/Arthakim" target="_blank" rel="noopener">Написать в Telegram</a>
        </div>

        <!-- Форма подключим позже (Formspree) -->
        <form action="https://formspree.io/f/xxxxxxxx" method="POST" class="contact-form">
          <input type="hidden" name="_subject" value="Новая заявка с сайта Art‑87 · 3D виз">
          <label class="sr-only" for="name">Имя</label>
          <input id="name" type="text" name="name" placeholder="Имя*" required>
          <label class="sr-only" for="email">Email</label>
          <input id="email" type="email" name="email" placeholder="Email*" required>
          <label class="sr-only" for="service">Услуга</label>
          <select id="service" name="service" aria-label="Услуга">
            <option value="">Тип услуги (опционально)</option>
            <option>Интерьер</option>
            <option>Экстерьер</option>
            <option>Предметная визуализация</option>
            <option>3D‑моделирование</option>
          </select>
          <input type="text" name="_honey" style="display:none" tabindex="-1" autocomplete="off">
          <textarea name="message" placeholder="Коротко опишите задачу*" required></textarea>
          <button class="btn primary full" type="submit">Отправить</button>
        </form>

        <p class="muted" style="margin-top:10px;font-size:14px">Email добавим позже. Для формы поставь URL от Formspree вместо xxxxxxxx — и всё заработает.</p>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      © <span id="y"></span> Art‑87 — 3D визуализация и моделирование.
    </div>
  </footer>

  <script>
    // Год в футере
    document.getElementById('y').textContent = new Date().getFullYear();

    // Тема (светлая/тёмная) + theme-color
    (function(){
      const key = 'theme';
      const btn = document.getElementById('theme-toggle');
      const root = document.documentElement;
      const metaTC = document.querySelector('meta[name="theme-color"]');
      const colors = { dark: '#0b1020', light: '#f8fafc' };

      const saved = localStorage.getItem(key);
      if(saved){ root.setAttribute('data-theme', saved); metaTC && (metaTC.content = colors[saved] || colors.dark); }
      else { root.setAttribute('data-theme', 'dark'); metaTC && (metaTC.content = colors.dark); }

      btn.addEventListener('click', () => {
        const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        root.setAttribute('data-theme', next);
        localStorage.setItem(key, next);
        metaTC && (metaTC.content = colors[next] || colors.dark);
      });
    })();

    // Portfolio — Coverflow (фильтры, навигация, клавиатура, колесо, свайп, лайтбокс)
    (function(){
      const root = document.getElementById('coverflow');
      if(!root) return;
      const track = root.querySelector('.cf-track');
      const vp = root.querySelector('.cf-viewport');
      const btnPrev = root.querySelector('.cf-nav.prev');
      const btnNext = root.querySelector('.cf-nav.next');
      const dotsWrap = root.querySelector('.cf-dots');
      const chips = document.querySelectorAll('#portfolio .filters .chip');

      let all = Array.from(track.querySelectorAll('.cf-item'));
      let visible = all.slice();
      let index = 0;

      function buildDots(){
        dotsWrap.innerHTML = visible.map((_,i)=>`<button class="dot" aria-selected="${i===index}" type="button"><span class="sr-only">Работа ${i+1}</span></button>`).join('');
        Array.from(dotsWrap.children).forEach((d,i)=> d.addEventListener('click', ()=> go(i)));
      }
      function transformFor(offset){
        const abs = Math.abs(offset);
        const w = vp.clientWidth;
        const step = Math.min(w*0.28, 360);
        const x = offset * step;
        const z = Math.max(0, 140 - abs*90);
        const ry = -offset * 22;
        const scale = 1 - Math.min(abs*0.08, 0.34);
        const opacity = 1 - Math.min(abs*0.15, 0.6);
        return { x, z, ry, scale, opacity };
      }
      function update(){
        visible.forEach((el,i)=>{
          const off = i - index;
          const {x,z,ry,scale,opacity} = transformFor(off);
          el.style.transform = `translate(-50%,-50%) translateX(${x}px) translateZ(${z}px) rotateY(${ry}deg) scale(${scale})`;
          el.style.opacity = opacity;
          el.style.zIndex = String(1000 - Math.abs(off));
        });
        if(dotsWrap.children.length === visible.length){
          Array.from(dotsWrap.children).forEach((d,i)=> d.setAttribute('aria-selected', i===index));
        } else {
          buildDots();
        }
        const atStart = index===0, atEnd = index===visible.length-1;
        btnPrev.disabled = atStart; btnNext.disabled = atEnd;
        btnPrev.style.opacity = atStart? .5 : 1;
        btnNext.style.opacity = atEnd? .5 : 1;
      }
      function go(i){
        index = Math.max(0, Math.min(i, visible.length-1));
        update();
      }

      // Фильтры
      chips.forEach(ch=> ch.addEventListener('click', ()=>{
        chips.forEach(c=>c.classList.remove('is-active'));
        ch.classList.add('is-active');
        const f = ch.dataset.filter;
        visible = (f==='all') ? all.slice() : all.filter(el => el.dataset.cat === f);
        index = 0;
        all.forEach(el => el.style.display = visible.includes(el) ? '' : 'none');
        buildDots(); update();
      }));

      // Кнопки
      btnPrev.addEventListener('click', ()=> go(index-1));
      btnNext.addEventListener('click', ()=> go(index+1));

      // Клавиатура
      root.addEventListener('keydown', e=>{
        if(e.key==='ArrowLeft') go(index-1);
        if(e.key==='ArrowRight') go(index+1);
      });

      // Колесо → перелистывание
      root.addEventListener('wheel', (e)=>{
        if(Math.abs(e.deltaY) > Math.abs(e.deltaX)){
          e.preventDefault();
          go(index + (e.deltaY > 0 ? 1 : -1));
        }
      }, {passive:false});

      // Свайп/перетаскивание
      let down=false, startX=0, pid=0;
      track.addEventListener('pointerdown', e=>{ down=true; startX=e.clientX; pid=e.pointerId; track.setPointerCapture(pid); });
      track.addEventListener('pointermove', e=>{
        if(!down) return;
        const dx = e.clientX - startX;
        if(Math.abs(dx)>60){ go(index + (dx<0?1:-1)); startX=e.clientX; }
      });
      function endDrag(){ down=false; }
      track.addEventListener('pointerup', endDrag);
      track.addEventListener('pointercancel', endDrag);

      // Лайтбокс
      const lb = document.createElement('div');
      lb.className = 'lightbox';
      lb.innerHTML = `
        <div class="frame">
          <button class="close" aria-label="Закрыть">×</button>
          <button class="lb-prev" aria-label="Предыдущий">‹</button>
          <img alt="">
          <button class="lb-next" aria-label="Следующий">›</button>
          <div class="cap"></div>
        </div>`;
      document.body.appendChild(lb);
      const lbImg = lb.querySelector('img'), lbCap = lb.querySelector('.cap');
      const lbClose = lb.querySelector('.close'), lbPrev = lb.querySelector('.lb-prev'), lbNext = lb.querySelector('.lb-next');
      let lbIdx = 0;

      function openLB(i){
        const items = visible; if(!items.length) return;
        lbIdx = Math.max(0, Math.min(i, items.length-1));
        const fig = items[lbIdx];
        const img = fig.querySelector('img');
        lbImg.src = img.currentSrc || img.src;
        lbImg.alt = img.alt || '';
        lbCap.textContent = fig.querySelector('figcaption')?.textContent || '';
        lb.classList.add('is-open'); document.body.style.overflow='hidden';
      }
      function closeLB(){ lb.classList.remove('is-open'); document.body.style.overflow=''; }
      function navLB(d){ const items=visible; if(!items.length) return; lbIdx = (lbIdx + d + items.length) % items.length; openLB(lbIdx); }

      all.forEach((el,i)=> el.addEventListener('click', ()=>{
        const start = visible.indexOf(el);
        openLB(start>=0 ? start : i);
      }));
      lbClose.addEventListener('click', closeLB);
      lbPrev.addEventListener('click', ()=> navLB(-1));
      lbNext.addEventListener('click', ()=> navLB(1));
      lb.addEventListener('click', (e)=>{ if(e.target===lb) closeLB(); });
      document.addEventListener('keydown', (e)=>{
        if(!lb.classList.contains('is-open')) return;
        if(e.key==='Escape') closeLB();
        if(e.key==='ArrowRight') navLB(1);
        if(e.key==='ArrowLeft')  navLB(-1);
      });

      // Ресайз
      if('ResizeObserver' in window){ new ResizeObserver(update).observe(vp); }
      window.addEventListener('resize', update);

      // Старт
      buildDots(); update();
    })();

    // Если форма не подключена — перехват
    (function(){
      const form = document.querySelector('.contact-form');
      if(!form) return;
      form.addEventListener('submit', (e)=>{
        if((form.getAttribute('action')||'').includes('xxxxxxxx')){
          e.preventDefault();
          alert('Форма будет подключена позже. Напишите в Telegram: @Arthakim');
        }
      });
    })();
  </script>

  <noscript>Похоже, у вас отключён JavaScript — для портфолио нужен JS. Hero показывает статичную обложку.</noscript>
</body>
</html>
